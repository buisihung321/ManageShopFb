<!DOCTYPE html><html><head><meta charset=utf-8 /><script src=../Scripts/jquery-3.3.1.js></script><script src=../Scripts/bootstrap.js></script><link href=../Content/bootstrap.css rel=stylesheet /><title>Test FB</title></head><body><script>function statusChangeCallback(n){console.log("Status response: ");console.log(n);n.authResponse?($(".fb-status").html(`<p class="text-success">Connectted</p>`),$(".login-fb").css("display","none"),$(".logout-fb").css("display","block"),access_token=n.authResponse.accessToken):($(".login-fb").css("display","block"),$(".logout-fb").css("display","none"))}function logginFb(){FB.login(function(n){n.status==="connected"?statusChangeCallback(n):(alert("Plese logiin to FB"),location.reload())},{scope:"email,user_likes,manage_pages,user_photos,user_posts,publish_to_groups,publish_pages"})}function getPageToken(){let n=$("#page-token .row"),t=n.find(`input[name="pageId"]`).val();FB.api(t,"GET",{fields:`access_token`,access_token:access_token},n=>console.log(n))}function logoutFb(){FB.logout(function(){location.reload()})}function getUserInfo(){$.ajax({type:"GET",url:"https://graph.facebook.com/v4.0/me",data:{access_token:access_token,fields:`last_name,id , name`},success:function(n){console.log(n);renderUserInfo(n)}})}function renderUserInfo(n){let t=`<table class="table table-bordered table-dark">
                                <caption>User info</caption>
                                <tr>
                                    <th>Name</th>
                                    <td>${n.name}</td>
                                </tr>
                                <tr>
                                    <th>ID</th>
                                    <td>${n.id}</td>
                                </tr>
                                <tr>
                                    <th>Access_Token</th>
                                    <td><textarea class="form-control"  rows="4">${access_token}</textarea></td>
                                </tr>
                            </table>`;$(".info-wrapper").append(t);let i=`<form action="https://graph.facebook.com/v4.0/${n.id}/photos" method="post" enctype="multipart/form-data">
                            <label>Caption</label>
                            <input type="text" value="" name="caption" class="form-control" />
                            <label>Url</label>
                            <input type="text" name="url" value="https://ucarecdn.com/ae1e3eec-5ef1-471e-8b43-b8e4c95861e4/-/preview/950x950/-/filter/sorlen/-34/" />
                            <label>User Token</label>
                            <input type="text" name="access_token" value="${access_token}" />
                            <button type="submit">Send</button>
                        </form>`;$("#logged-wrapper").append(i)}function postFb(){FB.api("1659222677486198/feed","POST",{message:"Test by me",access_token:"EAAEk1ybcCooBAEuUfW2G3RRe1XlrU50Nu9GpXcMZCck3Fgs1ZAeaU6BYZADY3km6LwSU8p8qksZBrqyWPC2xwmGtxeUQluOGOZAysTfjdNaHjTEGZAC2ZBUvxr1enJD66GQu8tZBi26GEkoOOWtnFCH4kf2U4BmBz4GLlZBmCPMNWP9KZAW0v25nIQG0hLJzw5gRBZBN4ByhI5JzAZDZD"},n=>{console.log(n)})}var access_token,pId="1659222677486198";let pToken="EAAEk1ybcCooBAEuUfW2G3RRe1XlrU50Nu9GpXcMZCck3Fgs1ZAeaU6BYZADY3km6LwSU8p8qksZBrqyWPC2xwmGtxeUQluOGOZAysTfjdNaHjTEGZAC2ZBUvxr1enJD66GQu8tZBi26GEkoOOWtnFCH4kf2U4BmBz4GLlZBmCPMNWP9KZAW0v25nIQG0hLJzw5gRBZBN4ByhI5JzAZDZD";window.fbAsyncInit=function(){FB.init({appId:"321981465234058",autoLogAppEvents:!0,xfbml:!0,version:"v4.0"});FB.getLoginStatus(function(n){statusChangeCallback(n)})}</script><script async defer src=https://connect.facebook.net/en_US/sdk.js></script><h1 class=m-2>FB Api Testing</h1><div class="header d-flex"><div class=fb-status></div><button class="mx-2 btn btn-primary login-fb" onclick=logginFb()>Login</button> <button class="mx-2 btn btn-primary logout-fb" onclick=logoutFb()>Logout</button></div><div id=logged-wrapper class="my-2 container-fluid"><div id=fb-info><button class="btn btn-primary" onclick=getUserInfo()>Get user info</button><div class=info-wrapper></div></div><div id=page-token><div class=row><div class=col><button class="btn btn-primary" onclick=getPageToken()>Get Page token</button></div><div class=col><input type=text name=pageId value=1659222677486198 /></div></div></div><div id=post class=my-4><table class="table table-bordered table-dark"><tr><th>Message</th><td><input class=form-control type=text name=message /></td></tr><tr><th>Access_token</th>
                    <td><textarea class=form-control name=access_token></textarea></td></tr><tr><td></td><td class=text-right><button class="btn btn-primary" onclick=postFb()>Post a feed</button></td></tr></table></div><form action=https://graph.facebook.com/v4.0/1659222677486198/photos method=post enctype=multipart/form-data><label>Caption</label><input type=text name=caption class=form-control /> <label>Url</label><input type=text name=url value=https://ucarecdn.com/ae1e3eec-5ef1-471e-8b43-b8e4c95861e4/-/preview/950x950/-/filter/sorlen/-34/  /> <label>Page Token</label><input type=text value=EAAEk1ybcCooBAEuUfW2G3RRe1XlrU50Nu9GpXcMZCck3Fgs1ZAeaU6BYZADY3km6LwSU8p8qksZBrqyWPC2xwmGtxeUQluOGOZAysTfjdNaHjTEGZAC2ZBUvxr1enJD66GQu8tZBi26GEkoOOWtnFCH4kf2U4BmBz4GLlZBmCPMNWP9KZAW0v25nIQG0hLJzw5gRBZBN4ByhI5JzAZDZD name=access_token /> <button type=submit>Send</button></form></div></body></html>