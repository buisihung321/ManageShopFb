<!DOCTYPE html><html><head><meta charset=utf-8 /><script src=../Scripts/jquery-3.3.1.js></script><script src=../Scripts/bootstrap.js></script><link href=../Content/bootstrap.css rel=stylesheet /><title>Test FB</title></head><body><script>function statusChangeCallback(n){console.log("Status response: ");console.log(n);n.authResponse?($(".fb-status").html(`<p class="text-success">Connectted</p>`),$(".login-fb").css("display","none"),$(".logout-fb").css("display","block"),access_token=n.authResponse.accessToken):($(".login-fb").css("display","block"),$(".logout-fb").css("display","none"))}function logginFb(){FB.login(function(n){n.status==="connected"?statusChangeCallback(n):(alert("Plese logiin to FB"),location.reload())})}function getPageToken(){let n=$("#page-token .row"),t=n.find(`input[name="pageId"]`).val();FB.api(t,"GET",{fields:`access_token`,access_token:access_token},n=>{console.log("Page token"),$("input.page_token").val(n.access_token)})}function logoutFb(){FB.logout(function(){location.reload()})}function getUserInfo(){$.ajax({type:"GET",url:"https://graph.facebook.com/v4.0/me",data:{access_token:access_token,fields:`last_name,id , name`},success:function(n){console.log(n);renderUserInfo(n)}})}function renderUserInfo(n){let t=`<table class="table table-bordered table-dark">
                                    <caption>User info</caption>
                                    <tr>
                                        <th>Name</th>
                                        <td>${n.name}</td>
                                    </tr>
                                    <tr>
                                        <th>ID</th>
                                        <td>${n.id}</td>
                                    </tr>
                                    <tr>
                                        <th>Access_Token</th>
                                        <td><textarea class="form-control"  rows="4">${access_token}</textarea></td>
                                    </tr>
                                </table>`;$(".info-wrapper").append(t);let i=`<form action="https://graph.facebook.com/v4.0/${n.id}/photos" method="post" enctype="multipart/form-data">
                                <label>Caption</label>
                                <input type="text" value="" name="caption" class="form-control" />
                                <label>Url</label>
                                <input type="text" name="url" value="https://ucarecdn.com/ae1e3eec-5ef1-471e-8b43-b8e4c95861e4/-/preview/950x950/-/filter/sorlen/-34/" />
                                <label>User Token</label>
                                <input type="text" name="access_token" value="${access_token}" />
                                <button type="submit">Send</button>
                            </form>`;$("#logged-wrapper").append(i)}function postFb(){FB.api("1659222677486198/feed","POST",{message:"Test by me",access_token:"EAAEk1ybcCooBAEuUfW2G3RRe1XlrU50Nu9GpXcMZCck3Fgs1ZAeaU6BYZADY3km6LwSU8p8qksZBrqyWPC2xwmGtxeUQluOGOZAysTfjdNaHjTEGZAC2ZBUvxr1enJD66GQu8tZBi26GEkoOOWtnFCH4kf2U4BmBz4GLlZBmCPMNWP9KZAW0v25nIQG0hLJzw5gRBZBN4ByhI5JzAZDZD"},n=>{console.log(n)})}function uploadMultipleFileToAlbum(){var n;const r=$(`input[name="files"]`);console.log(r.prop("files"));let i=r.prop("files"),u=[],t={};for(n=0;n<i.length;n++)u[n]={method:"POST",relative_url:"2959732954101824/photos",body:`message=My photo ${i[n].name}} `,attached_files:`file${n+1}`};for(t.batch=JSON.stringify(u),n=0;n<2;n++)t[`file${n+1}`]=i[n];t.access_token="EAAEk1ybcCooBADXHZCyNnQnRbUdREacPPJU4eU9XZBCjMkqvYXDG9uowHUCronGiMQWnrdtQ3cWQ5OuXZAbna7WLvnlqkPv6n9QlREfpZBR5d7hChPETZBoaRQ1tnvsENjO9hyFGA0oXjlb68EiFHGQ9yllT7Lxz33u3ZCqxwUZBoOZAer0ZA19BBkyfE920EdaN9WCycNfXSbAZDZD";console.log(t);$.ajax({type:"POST",url:"https://graph.facebook.com/v4.0/",contentType:"multipart/form-data",data:JSON.stringify(t),success:function(n){console.log("Upload multiple photo");console.log(n)},error:function(n){alert("Error");console.log(n)}})}function multiplePhotoRequest(){let u="1659222677486198",i=["https://ucarecdn.com/5eb7b2cc-eed7-4d99-8fac-540c346aae3c/71168328_1380178058799234_7841529943602233344_n.jpg","https://ucarecdn.com/bd617f80-6019-4829-bde6-8a68abbae351/Quiz1_2.png"],r=[],n={};for(let n=0;n<i.length;n++){let t={};t.method="POST";t.relative_url=`${u}/photos`;t.body=`message= Picture${n+1};`;t.attached_files=`file${n+1}`;r[n]=t}n.batch=JSON.stringify(r);for(var t=0;t<i.length;t++)n[`file${t+1}`]=i[t];n.access_token="EAAEk1ybcCooBAPbgQa21ZAZCS1eVZBZBR7jg2Ked0JhLe7y6Mon93RVOoZCLvZB1vS1iC2jfXGc0lWrkNKlzIbqajR9Wfe4uVU8oojZAL8p4WbF4WazUiM2zuXRoZAZAfEZBNASjZBJktRbCqOyP90klsl01b7RZAnAFolrFNdBZCXYZAcMAZDZD";console.log(JSON.stringify(n));$.ajax({type:"POST",url:`https://graph.facebook.com/`,data:n,success:function(n){console.log("Uploading multiple file....");console.log(n)},error:function(n){alert("Error");console.log(n)}});FB.api("/","POST",{batch:[{method:"GET",relative_url:"me/friends"},{method:"POST",relative_url:"me/feed",body:$.param(opts)}]},function(n){console.log(n)})}function postOnePhoto(){$.ajax({type:"POST",url:`https://graph.facebook.com/1659222677486198/photos`,data:{message:"Test post a photo",url:"https://ucarecdn.com/bd617f80-6019-4829-bde6-8a68abbae351/Quiz1_2.png",access_token:"EAAEk1ybcCooBAPbgQa21ZAZCS1eVZBZBR7jg2Ked0JhLe7y6Mon93RVOoZCLvZB1vS1iC2jfXGc0lWrkNKlzIbqajR9Wfe4uVU8oojZAL8p4WbF4WazUiM2zuXRoZAZAfEZBNASjZBJktRbCqOyP90klsl01b7RZAnAFolrFNdBZCXYZAcMAZDZD"},success:function(n){console.log("Uploading a photo....");console.log(n)},error:function(n){alert("Error");console.log(n)}})}var access_token,pId="1659222677486198";let pToken="EAAEk1ybcCooBAEuUfW2G3RRe1XlrU50Nu9GpXcMZCck3Fgs1ZAeaU6BYZADY3km6LwSU8p8qksZBrqyWPC2xwmGtxeUQluOGOZAysTfjdNaHjTEGZAC2ZBUvxr1enJD66GQu8tZBi26GEkoOOWtnFCH4kf2U4BmBz4GLlZBmCPMNWP9KZAW0v25nIQG0hLJzw5gRBZBN4ByhI5JzAZDZD";window.fbAsyncInit=function(){FB.init({appId:"321981465234058",autoLogAppEvents:!0,xfbml:!0,version:"v4.0"});FB.getLoginStatus(function(n){statusChangeCallback(n)})}</script><script async defer src=https://connect.facebook.net/en_US/sdk.js></script><h1 class=m-2>FB Api Testing</h1><div class="header d-flex"><div class=fb-status></div><button class="mx-2 btn btn-primary login-fb" onclick=logginFb()>Login</button> <button class="mx-2 btn btn-primary logout-fb" onclick=logoutFb()>Logout</button></div><div id=logged-wrapper class="my-2 container-fluid"><div id=fb-info><button class="btn btn-primary" onclick=getUserInfo()>Get user info</button><div class=info-wrapper></div></div><hr /><div id=page-token><div class=row><div class=col><button class="btn btn-primary" onclick=getPageToken()>Get Page token</button></div><div class=col><input type=text name=pageId value=1659222677486198 /></div></div></div><hr /><div id=post class=my-4><table class="table table-bordered table-dark"><tr><th>Message</th><td><input class=form-control type=text name=message /></td></tr><tr><th>Access_token</th>
                    <td><textarea class=form-control name=access_token></textarea></td></tr><tr><td></td><td class=text-right><button class="btn btn-primary" onclick=postFb()>Post a feed</button></td></tr></table></div><hr /><form action=https://graph.facebook.com/v4.0/1659222677486198/photos method=post enctype=multipart/form-data><label>Caption</label><input type=text name=caption class=form-control /> <label>Url</label><input type=text name=url value=https://ucarecdn.com/ae1e3eec-5ef1-471e-8b43-b8e4c95861e4/-/preview/950x950/-/filter/sorlen/-34/  /> <label>Page Token</label><input class=page_token type=text name=access_token /> <button type=submit>Send</button></form><hr /><form action=https://graph.facebook.com/v4.0/1659222677486198/albums method=post enctype=multipart/form-data><label>Name</label><input type=text name=name class=form-control placeholder="Name of album" /><br /> <label>Message</label><input type=text name=message class=form-control placeholder="Description of album" /><br /><br /><input type=file name=source /><input class=page_token type=text name=access_token /> <button type=submit>Send</button></form><h1 class="badge bg-primary">POST WITH EXISTED ALBUM</h1><form action=https://graph.facebook.com/v4.0/2959732954101824/photos method=POST>URL:<input type=text name=url /><br /> Message:<input type=text name=message /><br /><input class=page_token type=text name=access_token /> <button class="btn btn-primary" type=submit>Send</button></form><h1>Test upload multiple photo to existed album</h1><button class="btn btn-success" onclick=multiplePhotoRequest()>Upload multiple</button><input type=file multiple name=files /><h5>Post one photo</h5><button class="btn btn-outline-dark" onclick=postOnePhoto()>Post one photo</button></div></body></html>